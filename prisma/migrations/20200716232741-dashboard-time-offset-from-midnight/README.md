# Migration `20200716232741-dashboard-time-offset-from-midnight`

This migration has been generated by Will Willis at 7/16/2020, 11:27:41 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."JournalEntry" DROP CONSTRAINT "JournalEntry_authorId_fkey"

ALTER TABLE "public"."Dashboard" ADD COLUMN "minuteOffset" integer  NOT NULL DEFAULT 0;

ALTER TABLE "public"."JournalEntry" DROP COLUMN "authorId",
DROP COLUMN "createdAt";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200716221041-journal-entry_add-author..20200716232741-dashboard-time-offset-from-midnight
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -16,26 +16,26 @@
   users      User[]
 }
 model Dashboard {
-  id        Int       @default(autoincrement()) @id
-  name      String    @unique
-  groups    Group[]   @relation(references: [id])
-  sections  Section[]
-  createdAt DateTime  @default(now())
-  updatedAt DateTime  @updatedAt
-  published Boolean   @default(false)
+  id           Int       @default(autoincrement()) @id
+  name         String    @unique
+  groups       Group[]   @relation(references: [id])
+  sections     Section[]
+  createdAt    DateTime  @default(now())
+  updatedAt    DateTime  @updatedAt
+  published    Boolean   @default(false)
+  minuteOffset Int       @default(0)
 }
 model User {
-  id             Int            @default(autoincrement()) @id
-  createdAt      DateTime       @default(now())
-  email          String         @unique
-  name           String?
-  password       String
-  group          Group?         @relation(fields: [groupId], references: [id])
-  groupId        Int?
-  journalEntries JournalEntry[]
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  email     String   @unique
+  name      String?
+  password  String
+  group     Group?   @relation(fields: [groupId], references: [id])
+  groupId   Int?
 }
 model Section {
   id              Int        @default(autoincrement()) @id
@@ -64,15 +64,14 @@
   sectionId       Int
 }
 model JournalEntry {
-  id        Int      @default(autoincrement()) @id
-  entry     String?
-  step      Step     @relation(fields: [stepId], references: [id])
-  stepId    Int
-  createdAt DateTime @default(now())
-  author    User     @relation(fields: [authorId], references: [id])
-  authorId  Int
+  id     Int     @default(autoincrement()) @id
+  entry  String?
+  step   Step    @relation(fields: [stepId], references: [id])
+  stepId Int
+  // author   User    @relation(fields: [authorId], references: [id])
+  // authorId String
 }
 model Job {
   id        Int      @default(autoincrement()) @id
```


